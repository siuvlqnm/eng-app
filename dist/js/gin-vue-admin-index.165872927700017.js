/*! 
 Build based on gin-vue-admin 
 Time : 1658729277000 */
var e=(e,a,t)=>new Promise(((l,n)=>{var i=e=>{try{s(t.next(e))}catch(a){n(a)}},o=e=>{try{s(t.throw(e))}catch(a){n(a)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(i,o);s((t=t.apply(e,a)).next())}));import{f as a,h as t,r as l}from"./gin-vue-admin-autoCode.1658729277000.js";import{_ as n,u as i,r as o,b as s,o as u,c as r,d,e as c,w as p,h as m,t as f,y as g,q as v,B as y,i as h}from"../gva/gin-vue-admin-index.1658729277000.js";import{f as b}from"./gin-vue-admin-format.1658729277000.js";import"./gin-vue-admin-date.1658729277000.js";import"./gin-vue-admin-dictionary.1658729277000.js";import"./gin-vue-admin-sysDictionary.1658729277000.js";const w={class:"gva-table-box"},C={class:"gva-btn-list"},k=m("新增"),x=m(" 已回滚 "),z=m(" 未回滚 "),_=m("回滚(删表)"),T=m("回滚(不删表)"),B=m("复用"),j=m("删除"),N={class:"gva-pagination"},D={name:"AutoCodeAdmin"};var I=n(Object.assign(D,{setup(n){const D=i(),I=o(1),A=o(0),S=o(10),P=o([]),q=e=>{S.value=e,O()},E=e=>{I.value=e,O()},O=()=>e(this,null,(function*(){const e=yield a({page:I.value,pageSize:S.value});0===e.code&&(P.value=e.data.list,A.value=e.data.total,I.value=e.data.page,S.value=e.data.pageSize)}));O();const F=a=>e(this,null,(function*(){y.confirm("此操作将删除本历史, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>e(this,null,(function*(){0===(yield t({id:Number(a.ID)})).code&&(h.success("删除成功"),O())}))))})),G=(a,t)=>e(this,null,(function*(){t?y.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>e(this,null,(function*(){y.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>e(this,null,(function*(){y.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>e(this,null,(function*(){0===(yield l({id:Number(a.ID),deleteTable:t})).code&&(h.success("回滚成功"),O())}))))}))))})))):y.confirm("此操作将删除自动创建的文件和api, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>e(this,null,(function*(){0===(yield l({id:Number(a.ID),deleteTable:t})).code&&(h.success("回滚成功"),O())}))))})),H=e=>{e?D.push({name:"autoCodeEdit",params:{id:e.ID}}):D.push({name:"autoCode"})};return(e,a)=>{const t=s("el-button"),l=s("el-table-column"),n=s("el-tag"),i=s("el-table"),o=s("el-pagination");return u(),r("div",null,[d("div",w,[d("div",C,[c(t,{size:"small",type:"primary",icon:"plus",onClick:a[0]||(a[0]=e=>H(null))},{default:p((()=>[k])),_:1})]),c(i,{data:P.value},{default:p((()=>[c(l,{type:"selection",width:"55"}),c(l,{align:"left",label:"id",width:"60",prop:"ID"}),c(l,{align:"left",label:"日期",width:"180"},{default:p((e=>[m(f(g(b)(e.row.CreatedAt)),1)])),_:1}),c(l,{align:"left",label:"结构体名","min-width":"150",prop:"structName"}),c(l,{align:"left",label:"结构体描述","min-width":"150",prop:"structCNName"}),c(l,{align:"left",label:"表名称","min-width":"150",prop:"tableName"}),c(l,{align:"left",label:"回滚标记","min-width":"150",prop:"flag"},{default:p((e=>[e.row.flag?(u(),v(n,{key:0,type:"danger",size:"small",effect:"dark"},{default:p((()=>[x])),_:1})):(u(),v(n,{key:1,size:"small",type:"success",effect:"dark"},{default:p((()=>[z])),_:1}))])),_:1}),c(l,{align:"left",label:"操作","min-width":"240"},{default:p((e=>[d("div",null,[c(t,{size:"small",type:"primary",link:"",disabled:1===e.row.flag,onClick:a=>G(e.row,!0)},{default:p((()=>[_])),_:2},1032,["disabled","onClick"]),c(t,{size:"small",type:"primary",link:"",disabled:1===e.row.flag,onClick:a=>G(e.row,!1)},{default:p((()=>[T])),_:2},1032,["disabled","onClick"]),c(t,{size:"small",type:"primary",link:"",onClick:a=>H(e.row)},{default:p((()=>[B])),_:2},1032,["onClick"]),c(t,{size:"small",type:"primary",link:"",onClick:a=>F(e.row)},{default:p((()=>[j])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),d("div",N,[c(o,{"current-page":I.value,"page-size":S.value,"page-sizes":[10,30,50,100],total:A.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:E,onSizeChange:q},null,8,["current-page","page-size","total"])])])])}}}),[["__scopeId","data-v-2a944dbc"]]);export{I as default};
