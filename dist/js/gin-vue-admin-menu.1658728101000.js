/*! 
 Build based on gin-vue-admin 
 Time : 1658728101000 */
var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,u=(e,l,a)=>new Promise(((t,o)=>{var u=e=>{try{n(a.next(e))}catch(l){o(l)}},i=e=>{try{n(a.throw(e))}catch(l){o(l)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(u,i);n((a=a.apply(e,l)).next())}));import{_ as i,a as n,r as d,b as r,o as p,c as m,d as s,e as v,w as c,t as f,q as h,v as y,f as b,h as w,p as g,l as V,a0 as _,B as k,a4 as I,i as x,a5 as D,a6 as U,a7 as C}from"../gva/gin-vue-admin-index.1658728101000.js";import z from"./gin-vue-admin-icon.1658728101000.js";import{W as B}from"./gin-vue-admin-warningBar.1658728101000.js";import{c as j}from"./gin-vue-admin-authorityBtn.1658728101000.js";const q=e=>(g("data-v-080e404d"),e=e(),V(),e),P={class:"gva-table-box"},A={class:"gva-btn-list"},O=w("新增根菜单"),S={key:0,class:"icon-column"},T=w("添加子菜单"),M=w("编辑"),N=w("删除"),E={style:{display:"inline-flex"}},F=w(" 路由Path "),$=w("添加参数"),H=q((()=>s("span",{style:{"font-size":"12px","margin-right":"12px"}},"如果菜单包含子菜单，请创建router-view二级路由页面或者",-1))),K=w("点我设置"),W=w("新增菜单参数"),G=w("删除"),J=w("新增可控按钮"),L=w("删除"),Q={class:"dialog-footer"},R=w("取 消"),X=w("确 定"),Y={name:"Menus"};var Z=i(Object.assign(Y,{setup(e){const i=n({path:[{required:!0,message:"请输入菜单name",trigger:"blur"}],component:[{required:!0,message:"请输入文件路径",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入菜单展示名称",trigger:"blur"}]}),w=d(1),g=d(0),V=d(999),q=d([]),Y=d({}),Z=()=>u(this,null,(function*(){const e=yield _(((e,u)=>{for(var i in u||(u={}))a.call(u,i)&&o(e,i,u[i]);if(l)for(var i of l(u))t.call(u,i)&&o(e,i,u[i]);return e})({page:w.value,pageSize:V.value},Y.value));0===e.code&&(q.value=e.data.list,g.value=e.data.total,w.value=e.data.page,V.value=e.data.pageSize)}));Z();const ee=()=>{ae.value.component=ae.value.component.replace(/\\/g,"/")},le=(e,l)=>u(this,null,(function*(){const a=e[l];if(0===a.ID)return void e.splice(l,1);0!==(yield j({id:a.ID})).code||e.splice(l,1)})),ae=d({ID:0,path:"",name:"",hidden:"",parentId:"",component:"",meta:{title:"",icon:"",defaultMenu:!1,closeTab:!1,keepAlive:!1},parameters:[],menuBtn:[]}),te=()=>{ae.value.path=ae.value.name},oe=e=>{de(),e()},ue=e=>{k.confirm("此操作将永久删除所有角色下该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>u(this,null,(function*(){0===(yield I({ID:e})).code&&(x({type:"success",message:"删除成功!"}),1===q.value.length&&w.value>1&&w.value--,Z())})))).catch((()=>{x({type:"info",message:"已取消删除"})}))},ie=d(null),ne=d(!1),de=()=>{ne.value=!1,ie.value.resetFields(),ae.value={ID:0,path:"",name:"",hidden:"",parentId:"",component:"",meta:{title:"",icon:"",defaultMenu:!1,keepAlive:""}}},re=d(!1),pe=()=>{de(),re.value=!1},me=()=>u(this,null,(function*(){ie.value.validate((e=>u(this,null,(function*(){if(e){let e;e=fe.value?yield D(ae.value):yield U(ae.value),0===e.code&&(x({type:"success",message:fe.value?"编辑成功":"添加成功!"}),Z()),de(),re.value=!1}}))))})),se=d([{ID:"0",title:"根菜单"}]),ve=()=>{se.value=[{ID:"0",title:"根目录"}],ce(q.value,se.value,!1)},ce=(e,l,a)=>{e&&e.forEach((e=>{if(e.children&&e.children.length){const t={title:e.meta.title,ID:String(e.ID),disabled:a||e.ID===ae.value.ID,children:[]};ce(e.children,t.children,a||e.ID===ae.value.ID),l.push(t)}else{const t={title:e.meta.title,ID:String(e.ID),disabled:a||e.ID===ae.value.ID};l.push(t)}}))},fe=d(!1),he=d("新增菜单"),ye=e=>{he.value="新增菜单",ae.value.parentId=String(e),fe.value=!1,ve(),re.value=!0},be=e=>u(this,null,(function*(){he.value="编辑菜单";const l=yield C({id:e});ae.value=l.data.menu,fe.value=!0,ve(),re.value=!0}));return(e,l)=>{const a=r("el-button"),t=r("el-table-column"),o=r("el-icon"),u=r("el-table"),n=r("el-input"),d=r("el-form-item"),w=r("el-checkbox"),g=r("el-option"),V=r("el-select"),_=r("el-cascader"),k=r("el-form"),I=r("el-dialog");return p(),m("div",null,[s("div",P,[s("div",A,[v(a,{size:"small",type:"primary",icon:"plus",onClick:l[0]||(l[0]=e=>ye("0"))},{default:c((()=>[O])),_:1})]),v(u,{data:q.value,"row-key":"ID"},{default:c((()=>[v(t,{align:"left",label:"ID","min-width":"100",prop:"ID"}),v(t,{align:"left",label:"展示名称","min-width":"120",prop:"authorityName"},{default:c((e=>[s("span",null,f(e.row.meta.title),1)])),_:1}),v(t,{align:"left",label:"图标","min-width":"140",prop:"authorityName"},{default:c((e=>[e.row.meta.icon?(p(),m("div",S,[v(o,null,{default:c((()=>[(p(),h(y(e.row.meta.icon)))])),_:2},1024),s("span",null,f(e.row.meta.icon),1)])):b("",!0)])),_:1}),v(t,{align:"left",label:"路由Name","show-overflow-tooltip":"","min-width":"160",prop:"name"}),v(t,{align:"left",label:"路由Path","show-overflow-tooltip":"","min-width":"160",prop:"path"}),v(t,{align:"left",label:"是否隐藏","min-width":"100",prop:"hidden"},{default:c((e=>[s("span",null,f(e.row.hidden?"隐藏":"显示"),1)])),_:1}),v(t,{align:"left",label:"父节点","min-width":"90",prop:"parentId"}),v(t,{align:"left",label:"排序","min-width":"70",prop:"sort"}),v(t,{align:"left",label:"文件路径","min-width":"360",prop:"component"}),v(t,{align:"left",fixed:"right",label:"操作",width:"300"},{default:c((e=>[v(a,{size:"small",type:"primary",link:"",icon:"plus",onClick:l=>ye(e.row.ID)},{default:c((()=>[T])),_:2},1032,["onClick"]),v(a,{size:"small",type:"primary",link:"",icon:"edit",onClick:l=>be(e.row.ID)},{default:c((()=>[M])),_:2},1032,["onClick"]),v(a,{size:"small",type:"primary",link:"",icon:"delete",onClick:l=>ue(e.row.ID)},{default:c((()=>[N])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),v(I,{modelValue:re.value,"onUpdate:modelValue":l[14]||(l[14]=e=>re.value=e),"before-close":oe,title:he.value},{footer:c((()=>[s("div",Q,[v(a,{size:"small",onClick:pe},{default:c((()=>[R])),_:1}),v(a,{size:"small",type:"primary",onClick:me},{default:c((()=>[X])),_:1})])])),default:c((()=>[v(B,{title:"新增菜单，需要在角色管理内配置权限才可使用"}),re.value?(p(),h(k,{key:0,ref_key:"menuForm",ref:ie,inline:!0,model:ae.value,rules:i,"label-position":"top","label-width":"85px"},{default:c((()=>[v(d,{label:"路由Name",prop:"path",style:{width:"30%"}},{default:c((()=>[v(n,{modelValue:ae.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>ae.value.name=e),autocomplete:"off",placeholder:"唯一英文字符串",onChange:te},null,8,["modelValue"])])),_:1}),v(d,{prop:"path",style:{width:"30%"}},{label:c((()=>[s("div",E,[F,v(w,{modelValue:ne.value,"onUpdate:modelValue":l[2]||(l[2]=e=>ne.value=e),style:{float:"right","margin-left":"20px"}},{default:c((()=>[$])),_:1},8,["modelValue"])])])),default:c((()=>[v(n,{modelValue:ae.value.path,"onUpdate:modelValue":l[3]||(l[3]=e=>ae.value.path=e),disabled:!ne.value,autocomplete:"off",placeholder:"建议只在后方拼接参数"},null,8,["modelValue","disabled"])])),_:1}),v(d,{label:"是否隐藏",style:{width:"30%"}},{default:c((()=>[v(V,{modelValue:ae.value.hidden,"onUpdate:modelValue":l[4]||(l[4]=e=>ae.value.hidden=e),placeholder:"是否在列表隐藏"},{default:c((()=>[v(g,{value:!1,label:"否"}),v(g,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1}),v(d,{label:"父节点ID",style:{width:"30%"}},{default:c((()=>[v(_,{modelValue:ae.value.parentId,"onUpdate:modelValue":l[5]||(l[5]=e=>ae.value.parentId=e),style:{width:"100%"},disabled:!fe.value,options:se.value,props:{checkStrictly:!0,label:"title",value:"ID",disabled:"disabled",emitPath:!1},"show-all-levels":!1,filterable:""},null,8,["modelValue","disabled","options"])])),_:1}),v(d,{label:"文件路径",prop:"component",style:{width:"60%"}},{default:c((()=>[v(n,{modelValue:ae.value.component,"onUpdate:modelValue":l[6]||(l[6]=e=>ae.value.component=e),autocomplete:"off",placeholder:"页面:view/xxx/xx.vue 插件:plugin/xx/xx.vue",onBlur:ee},null,8,["modelValue"]),H,v(a,{style:{"margin-top":"4px"},size:"small",onClick:l[7]||(l[7]=e=>ae.value.component="view/routerHolder.vue")},{default:c((()=>[K])),_:1})])),_:1}),v(d,{label:"展示名称",prop:"meta.title",style:{width:"30%"}},{default:c((()=>[v(n,{modelValue:ae.value.meta.title,"onUpdate:modelValue":l[8]||(l[8]=e=>ae.value.meta.title=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),v(d,{label:"图标",prop:"meta.icon",style:{width:"30%"}},{default:c((()=>[v(z,{meta:ae.value.meta,style:{width:"100%"}},null,8,["meta"])])),_:1}),v(d,{label:"排序标记",prop:"sort",style:{width:"30%"}},{default:c((()=>[v(n,{modelValue:ae.value.sort,"onUpdate:modelValue":l[9]||(l[9]=e=>ae.value.sort=e),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])])),_:1}),v(d,{label:"KeepAlive",prop:"meta.keepAlive",style:{width:"30%"}},{default:c((()=>[v(V,{modelValue:ae.value.meta.keepAlive,"onUpdate:modelValue":l[10]||(l[10]=e=>ae.value.meta.keepAlive=e),style:{width:"100%"},placeholder:"是否keepAlive缓存页面"},{default:c((()=>[v(g,{value:!1,label:"否"}),v(g,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1}),v(d,{label:"CloseTab",prop:"meta.closeTab",style:{width:"30%"}},{default:c((()=>[v(V,{modelValue:ae.value.meta.closeTab,"onUpdate:modelValue":l[11]||(l[11]=e=>ae.value.meta.closeTab=e),style:{width:"100%"},placeholder:"是否自动关闭tab"},{default:c((()=>[v(g,{value:!1,label:"否"}),v(g,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])):b("",!0),s("div",null,[v(a,{size:"small",type:"primary",icon:"edit",onClick:l[12]||(l[12]=e=>{return(l=ae.value).parameters||(l.parameters=[]),void l.parameters.push({type:"query",key:"",value:""});var l})},{default:c((()=>[W])),_:1}),v(u,{data:ae.value.parameters,style:{width:"100%"}},{default:c((()=>[v(t,{align:"left",prop:"type",label:"参数类型",width:"180"},{default:c((e=>[v(V,{modelValue:e.row.type,"onUpdate:modelValue":l=>e.row.type=l,placeholder:"请选择"},{default:c((()=>[v(g,{key:"query",value:"query",label:"query"}),v(g,{key:"params",value:"params",label:"params"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),v(t,{align:"left",prop:"key",label:"参数key",width:"180"},{default:c((e=>[s("div",null,[v(n,{modelValue:e.row.key,"onUpdate:modelValue":l=>e.row.key=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),v(t,{align:"left",prop:"value",label:"参数值"},{default:c((e=>[s("div",null,[v(n,{modelValue:e.row.value,"onUpdate:modelValue":l=>e.row.value=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),v(t,{align:"left"},{default:c((e=>[s("div",null,[v(a,{type:"danger",size:"small",icon:"delete",onClick:l=>{return a=ae.value.parameters,t=e.$index,void a.splice(t,1);var a,t}},{default:c((()=>[G])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),v(a,{style:{"margin-top":"12px"},size:"small",type:"primary",icon:"edit",onClick:l[13]||(l[13]=e=>{return(l=ae.value).menuBtn||(l.menuBtn=[]),void l.menuBtn.push({name:"",desc:""});var l})},{default:c((()=>[J])),_:1}),v(u,{data:ae.value.menuBtn,style:{width:"100%"}},{default:c((()=>[v(t,{align:"left",prop:"name",label:"按钮名称",width:"180"},{default:c((e=>[s("div",null,[v(n,{modelValue:e.row.name,"onUpdate:modelValue":l=>e.row.name=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),v(t,{align:"left",prop:"name",label:"备注",width:"180"},{default:c((e=>[s("div",null,[v(n,{modelValue:e.row.desc,"onUpdate:modelValue":l=>e.row.desc=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),v(t,{align:"left"},{default:c((e=>[s("div",null,[v(a,{type:"danger",size:"small",icon:"delete",onClick:l=>le(ae.value.menuBtn,e.$index)},{default:c((()=>[L])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-080e404d"]]);export{Z as default};
